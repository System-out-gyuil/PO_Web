# 2025.04.29 (화)

## 1. Django setting 완료 및 초안

- 로컬 MySQL 연동 (DB 명 : PO)
- 나에게 맞는 지원금 검색, 상담 신청으로 db에 저장
- 관리자 페이지에서 상담 신청 데이터 list up
- 디자인 초안에 맞게 퍼블리싱
- 시간이 세계 표준시 UTC로 되어있어서 Asia/Seoul로 TimeZone 변경

## 2. 앞으로 해야 할 일

- 디자인 마무리
- 관리자 페이지 페이징처리, 체크기능, 데이터 삭제(소프트인지 하드인지 정하기)
- 서버 배포(Django, MySQL, ElasticSearch)
- 데이터 크롤링, 추출, 변환, 적제(elasticsearch에 indexing) 자동화
- 입력하는 데이터(region, industry, counsel form) 유효성 검사
- 검색 필터링(지역, 업종 등)
- 카카오 로그인 및 공유하기

<br>

# 2025.04.30 (수)

## 1. 프로젝트 배포

- AWS EC2 세팅 및 인바운드 보안그룹 세팅
- models 점검
- config 파일로 API_KEY, 비밀번호 등 보안 관리

<br>

# 2025.05.01 (목)

## 1. 프로젝트 프로토타입 배포

- AWS EC2 서비스로 웹 배포
- AWS EC2 서비스로 MySQL 서버 사용
- Gabia에서 도메인 결제 (namatji.com) 및 Route53과 DNS, Nginx를 통해 탄력 IP 설정과 도메인 배포
- Elasticsearch cloud로 ES API를 사용해서 Elasticsearch 서버 구축
- 웹 페이지 상단 '나에게 맞는 지원금' 클릭 시 메인 화면으로 이동
- 전문가 상담 폼에서 입력 양식 변경 및 유효성 검사(입력 했는지 안했는지)
- 검색 결과 페이지에서 더보기, 접기 클릭 시 제대로 작동 안하던 버그 수정

## 2. 앞으로 해야 할 일

- 디자인 깔끔하게 만들기
- 웹버전 만들기
- ES 서버 비용 청구하기
- 개인정보 제공 동의받기, 개인정보 보호법 제 15조 ~ 17조 참고
- 개인정보 제공 동의 컬럼 추가, 회원정보 저장해야하는지 체크하기
- 소상공인 교효율 ~~ 데이터 최상단 노출되게 만들기
- 공고일자 최신순 정렬하기
- config파일 합치기, ubuntu 환경에서도 따로 변경해야함
- 구글 애드센스 더 알아보기
- 메인페이지에서 지역, 업종 둘 중 하나만 선택해도 검색 하도록 하기(?)

경험에 따른 데이터 처리..
선정될만한 기준
쿠팡파트너스, 구글 애드센스
https

<br>

# 2025.05.02 (금)

## 1. HTTPS
- certbot으로 시도했는데 다섯번 실패하니 나중에 시도하라고 나옴
- AWS EC2 탄력적 IP 가 제대로 활성화 및 연결 되어있지 않아서 인스턴스 정지 후 재 연결
- Gunicorn 경로가 잘못되어서 재설정
- 다시한번 certbot.letsencryp으로 시도 결과 성공
- HTTPS가 등록됨에 따라 구글 애드센스 광고 신청 완료

## 2. 배포환경 설정

- 기존 python manage.py runserver 0:8080으로 개발 서버 사용중이었는데
이제 gunicorn을 백그라운드로 실행해 putty(ssh) 창을 꺼도 서버가 실행됨 (https://namatji.com)

## 3. 추후 진행 예정
- **(중요)개인정보 이용 동의**
- 디자인 하기
- 데이터 전체 양식 변경
- elasticsearch 서버 관리 (과금, 정규서버 등 확인 핋요)
- 관리자 페이지 기능 추가
- 카카오톡 연동 및 다른 소셜 기능 추가
- 구글 애드센스 광고 위치 나오면 조절
- 웹버전 제작
- 아이콘 만들기?
- 쿠팡 파트너스 배너 넣기

<br>

# 2025.05.07 (수)

## 1. 쿠팡 파트너스 광고 배너 등 사이즈 조정
- 기존에 body 태그의 속성으로 margin 8px이 있어서 사이즈가 맞지 않아서 배너가 화면 밖으로 벗어나는 현상이 있었음 <br>
body 태그의 margin과 padding을 0으로 변경하고, <br>
광고 배너에 margin: 0 auto, width: 100%로 화면에 가로 크기가 딱 맞게 설정했음

## 2. 전문가 상담 페이지 - 개인정보 수집 동의
- 개인정보 수집 동의 체크박스 생성 및 유효성 검사 추가

## 3. 검색 조건 추가 및 해당하는 조건이 많은 순서로 출력

- 사업기간 : 실제 공고상에 제대로 명시되지 않은 경우가 대부분
- 매출액(매출규모) : 거의 다 무관, 공고마다 기준이 다름 ex) 수출금액, 업력, 카드 매출액 기준 등
- 직원 수 : 공고 내에 거의 안적혀있음

<br>

- open ai api의 프롬프트에서 사업기간, 매출규모 등 데이터의 양식을 지정해주었음 ex) 1년 미만, 1~3년 중 택1

<br>

# 2025.05.09 (금)

## 1. 기업마당 API

- 기업마당 API 호출
- 기업마당 지원사업 상세보기 페이지에서 viewer를 crawling하여 첨부파일 미리보기 <br>
chrome-driver와 chrome-application을 ubuntu에서 install하여 사용<br>
crawling은 selenium으로 js를 통해 동적으로 나타나는 viewer를 가져와서 beautyful soup 라이브러리를 통해 iframe태그를 가져와서 사용<br>
로컬 환경에선 뷰어가 잘 동작하는데 배포환경에선 잘 나타나지 않는 문제가 있었음, 기업마당 API 담당자에게 전화해서 문의해봤지만 그럴싸한 해결책은 나오지 않았음<br>
해결방법 : chrome-driver가 로컬환경에선 설치가 잘 되어있고 경로설정까지 해놨지만, 배포환경인 ubuntu에는 설치가 되어있지 않아서 문제가 있었다.<br>

- 네이버 서치 어드바이저, 구글 서치콘솔 여전히 인증 안됌
- 지원사업 공고 게시판, 상세보기 페이지에 홈으로 가는 버튼 추가 (root경로로 이동)
- 게시판, 상세보기에 쿠팡 파트너스 광고 배너 추가

## 2. 네이버 서치어드바이저, 구글 서치콘솔 등록

- 구글 서치콘솔에서 요청한 대로 가비아에서 DNS 설정을 해주었으나 자꾸 인증이 실패,<br>
가비아에 전화문의 해보니 가비아가 아닌 AWS에서 네임서버를 사용중이기 때문이라 했음<br>
AWS ROUTE53에서 레코드 설정을 통해 TXT타입의 DNS 설정해주니 인증 완료됌<br>

- 네이버 서치어드바이저의 다양한 인증 절차를 따라서 인증했으나 robots.txt가 인증이 안되었음<br>
내 서버에 robots.txt 및 sitemap.xml 설정을 통해 작성하고 등록하려했으나 인증이 안됌<br>
네이버 서치어드바이저에서 내 사이트의 robots.txt를 직접 인증해주니 등록 완료 되었음

## 3. 추후 진행
- API기반 데이터 구축 (DB에 저장)
- 저장된 API 데이터에 자체 제작 데이터셋 매칭
- 파일 뷰어(미리보기) 상세페이지에서 한번 더 들어가야 볼 수 있게 만들기

<br>

# 2025.05.12 (월)

## 1. 기업마당 API MySQL에 저장

- 기업마당 api 데이터 우리 서버 MySQL에 저장한 후 사용
- 데이터 매일 18시에 업데이트, pblancId 기준으로 저장, 최초 데이터 1500개로 시작(4월 1일 공고부터)
  - linux의 crontab을 이용해서 등록된 시간에 해당 코드 (.py) 동작하도록 만듬

<br>

- 데이터 크롤링으로 기업마당 iframe태그의 src를 db에 같이 저장
- 약 700건 데이터 중 iframe 추출 못한 데이터 1개 발견(PBLN_000000000108483)
- 신청기간 데이터 없을 경우 상시 접수(예산 소진 시까지)
- 신청 양식이 없을 경우 if문으로 필터링해서 화면에 표시되지 않게함