
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  {% load static %}
  <link rel="stylesheet" href="{% static 'board/board.css' %}">
  <link rel="stylesheet" href="{% static 'base/base.css' %}">
  <link rel="icon" type="image/png" href="{% static 'images/NAMATJI_ICON.png' %}" />
  <title>지원사업 목록</title>
</head>
<body>
  {% include 'base/top_nav.html' %}

  <div class="search-container">
    <form method="get" action="{% url 'board:list' %}" style="display: flex; gap: 10px;">
      <select id="select-type" class="select-type" name="select-type" default="title">
        {% comment %} <option value="all">전체</option> {% endcomment %}
        {% comment %} <option value="field">분야</option> {% endcomment %}
        <option value="title">공고명</option>
        <option value="region">지역</option>
      </select>
      <input type="text" id="search-input" name="keyword" placeholder="검색어를 입력하세요">
      <button type="submit" id="search-button">검색</button>
    </form>
  </div>
  

  <div class="board-header">
    <h1>지원사업 목록</h1>
  </div>

  <table class="board-table">
    <thead>
      <colgroup>
        <col style="width: 5%">
        <col style="width: 15%">
        <col style="width: 15%">
        <col style="width: 65%">
      </colgroup>
      <tr>
        <th>등록일</th>
        <th>분야</th>
        <th>지역</th>
        <th>공고명</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td>{{ item.registered_at }}</td>
        <td>{{ item.field }}</td>

        {% if item.region %}
          <td>{{ item.region.0 }}</td>
        {% else %}
          <td>전국</td>
        {% endif %}

        <td onclick="location.href='{% url 'board:detail' item.pblanc_id %}?page_index={{ page_index }}'" style="cursor:pointer;">
          {{ item.title }}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Pagination -->
  <div class="pagination">
    {% if page_range %}
      {% if not is_first_block %}
        <a class="page-control-btn" href="?page_index=1&select-type={{ select_type }}&keyword={{ keyword }}">맨 처음</a>
        <a class="page-control-btn" href="?page_index={{ page_range.start|add:"-1" }}&select-type={{ select_type }}&keyword={{ keyword }}">이전</a>
      {% endif %}

      {% for page in page_range %}
        {% if page == page_index %}
          <strong>{{ page }}</strong>
        {% else %}
        <a class="page-num-btn" href="?page_index={{ page }}&select-type={{ select_type }}&keyword={{ keyword }}">{{ page }}</a>
        {% endif %}
      {% endfor %}

      {% if not is_last_block %}
        <a class="page-control-btn" href="?page_index={{ page_range.stop|add:"1" }}&select-type={{ select_type }}&keyword={{ keyword }}">다음</a>
        <a class="page-control-btn" href="?page_index={{ total_pages }}&select-type={{ select_type }}&keyword={{ keyword }}">맨 끝</a>
      {% endif %}
    {% endif %}
  </div>
  {% include 'base/coupang_banner.html' %}

  <script src="{% static 'board/board.js' %}"></script>
</body>
</html>
